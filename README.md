# Industry-Specific MC Training Platform

LINEèªè¨¼ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸæ¥­ç•Œç‰¹åŒ–å‹AIãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚Fine-tuned AIãƒ¢ãƒ‡ãƒ«ã€SEMrush APIé€£æºã€RAGï¼ˆRetrieval-Augmented Generationï¼‰ã‚·ã‚¹ãƒ†ãƒ ã€å‹•çš„ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ä½œæˆã€Canvasæç”»æ©Ÿèƒ½ã€WordPressé€£æºã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ±ºæ¸ˆã‚’çµ±åˆã—ãŸåŒ…æ‹¬çš„ãªSaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ğŸš€ ä¸»è¦æ©Ÿèƒ½

### ğŸ“± LINE LIFFèªè¨¼
- LINE Loginã«ã‚ˆã‚‹ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªèªè¨¼
- ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ»ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
- ç®¡ç†è€…æ¨©é™ã«ã‚ˆã‚‹éšå±¤åŒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- Row Level Securityï¼ˆRLSï¼‰ã«ã‚ˆã‚‹å³æ ¼ãªãƒ‡ãƒ¼ã‚¿åˆ†é›¢

### ğŸ¤– é«˜åº¦ãªAIãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
- **Fine-tuned AIãƒ¢ãƒ‡ãƒ«**ï¼š`ft:gpt-4.1-nano-2025-04-14` ã«ã‚ˆã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ†é¡
- **å¤šæ®µéšAIãƒ¢ãƒ‡ãƒ«å‡¦ç†**ï¼š4ã¤ã®å°‚é–€ãƒ¢ãƒ‡ãƒ«ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é¸å®šãƒ»åºƒå‘Šæ–‡ä½œæˆãƒ»åºƒå‘Šæ–‡ä»•ä¸Šã’ãƒ»LPä½œæˆï¼‰
- **RAGã‚·ã‚¹ãƒ†ãƒ **ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¤œç´¢æ‹¡å¼µç”Ÿæˆ
- **SEMrush APIçµ±åˆ**ï¼šç«¶åˆåºƒå‘Šåˆ†æãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒªã‚µãƒ¼ãƒ
- **Google Custom Search API**ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢ãƒ‡ãƒ¼ã‚¿é€£æº
- **Canvasæç”»æ©Ÿèƒ½**ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»ãƒ»å›³å½¢ä½œæˆãƒ»ãƒãƒ£ãƒƒãƒˆçµ±åˆ
- ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã®æ°¸ç¶šåŒ–ãƒ»æ¤œç´¢æ©Ÿèƒ½

### ğŸ¯ AI ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ãƒ»RAGã‚·ã‚¹ãƒ†ãƒ 
- **ç®¡ç†è€…å°‚ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†**ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ãƒ»React Cache
- **å‹•çš„å¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ **ï¼šäº‹æ¥­è€…æƒ…å ±17é …ç›®ã®è‡ªå‹•ç½®æ›
- **RAGï¼ˆæ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼‰**ï¼šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ„å‘³æ¤œç´¢ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢
- **4ã¤ã®å°‚é–€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**ï¼š
  - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é¸å®šï¼ˆFine-tuned OpenAIï¼‰
  - åºƒå‘Šæ–‡ä½œæˆï¼ˆClaudeï¼‰
  - åºƒå‘Šæ–‡ä»•ä¸Šã’ï¼ˆClaudeï¼‰
  - ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ãƒ‰ãƒ©ãƒ•ãƒˆä½œæˆï¼ˆ16ãƒ‘ãƒ¼ãƒˆæ§‹æˆãƒ»Claudeï¼‰

### ğŸ¨ ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ä½œæˆãƒ»WordPressé€£æº
- **WordPress.com / ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ WordPress**ï¼šä¸¡æ–¹å¼å¯¾å¿œ
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½**ï¼šãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä¸‹æ›¸ããƒ¢ãƒ¼ãƒ‰
- **OAuthèªè¨¼**ï¼šWordPress.com é€£æº
- **Application Password**ï¼šã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ WordPress å¯¾å¿œ

### ğŸ–¼ï¸ Canvasæç”»æ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»**ï¼šãƒšãƒ³ãƒ»å›³å½¢ãƒ»ãƒ†ã‚­ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
- **å±¥æ­´ç®¡ç†**ï¼šundo/redoãƒ»è‡ªå‹•ä¿å­˜
- **ãƒãƒ£ãƒƒãƒˆçµ±åˆ**ï¼šæç”»å†…å®¹ã®ç›´æ¥ãƒãƒ£ãƒƒãƒˆæŒ¿å…¥
- **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½**ï¼šPNG/JPG/SVGå½¢å¼å¯¾å¿œ

### ğŸ’³ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ»æ¨©é™ç®¡ç†
- **Stripe Checkout**ï¼šã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†
- **ä½¿ç”¨é‡åˆ¶é™**ï¼šGoogleæ¤œç´¢å›æ•°åˆ¶é™ãƒ»ãƒ—ãƒ©ãƒ³åˆ¥æ©Ÿèƒ½åˆ¶å¾¡
- **ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆ2025å¹´7æœˆæœ€æ–°ç‰ˆï¼‰

```mermaid
graph TB
    subgraph "Frontend Layer"
        A[Next.js 15 App Router]
        B[React 19 Components]
        C[Custom Hooks]
        D[Canvas API]
    end
    
    subgraph "Authentication"
        E[LINE LIFF 2.25]
        F[JWT Token Auto-Refresh]
    end
    
    subgraph "Business Logic"
        G[Server Actions]
        H[Domain Services]
        I[RAG System]
        J[Middleware]
    end
    
    subgraph "Data Layer"
        K[Supabase PostgreSQL + RLS]
        L[Sanity CMS 3.86]
        M[Vector Embeddings]
    end
    
    subgraph "AI Models"
        N[Fine-tuned OpenAI GPT-4]
        O[Claude Sonnet-4]
        P[RAG Retrieval]
        Q[Embedding Models]
    end
    
    subgraph "External APIs"
        R[Stripe 17.7]
        S[WordPress APIs]
        T[Google Search API]
        U[SEMrush API]
        V[LINE Platform API]
    end
    
    A --> E
    A --> G
    B --> C
    B --> D
    E --> F
    G --> H
    H --> I
    G --> K
    G --> L
    I --> M
    I --> P
    H --> N
    H --> O
    H --> Q
    H --> R
    H --> S
    H --> T
    H --> U
    H --> V
```

## ğŸ”„ èªè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as User
    participant C as Client
    participant L as LINE Platform
    participant S as Server
    participant DB as Supabase
    
    U->>C: ã‚¢ãƒ—ãƒªã‚¢ã‚¯ã‚»ã‚¹
    C->>L: LIFFåˆæœŸåŒ–
    alt æœªèªè¨¼ã®å ´åˆ
        C->>L: LINE Login
        L->>U: èªè¨¼ç”»é¢è¡¨ç¤º
        U->>L: èªè¨¼è¨±å¯
        L->>C: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
    end
    C->>S: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    S->>L: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
    L->>S: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
    S->>DB: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ä¿å­˜/æ›´æ–°
    S->>C: èªè¨¼å®Œäº†
```

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**
- **Next.js 15.3.1** - React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆApp Router + Turbopackï¼‰
- **React 19.0.0** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆServer Componentså¯¾å¿œï¼‰
- **TypeScript 5.x** - strict mode ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§
- **Tailwind CSS 4.x** - PostCSSçµ±åˆã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **TipTap 3.0.7** - ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼
- **Canvas API** - æç”»ãƒ»å›³å½¢ä½œæˆæ©Ÿèƒ½

### **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»AI**
- **Supabase 2.49.1** - PostgreSQL + RLS + Vector Embeddings
- **OpenAI API 4.90** - GPT-4 + Fine-tuned ãƒ¢ãƒ‡ãƒ«
- **Anthropic Claude** - Sonnet-4 via @ai-sdk/anthropic 1.2.12
- **RAGã‚·ã‚¹ãƒ†ãƒ ** - ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æ¤œç´¢
- **@t3-oss/env-nextjs 0.12.0** - å‹å®‰å…¨ãªç’°å¢ƒå¤‰æ•°ç®¡ç†

### **å¤–éƒ¨APIçµ±åˆ**
- **SEMrush API** - ç«¶åˆåˆ†æãƒ»åºƒå‘Šãƒ‡ãƒ¼ã‚¿
- **Google Custom Search API** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œç´¢
- **LINE LIFF 2.25.1** - LINEèªè¨¼ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- **Stripe 17.7.0** - ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ»æ±ºæ¸ˆç®¡ç†

### **é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
- **Vercel** - ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ»è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- **Husky 9.1.7 + lint-staged 16.1.2** - Git hooks ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†
- **ESLint 9 + Prettier 3.5.3** - çµ±åˆãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **tsc-watch 6.2.1** - TypeScriptç›£è¦–ãƒ»ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

```mermaid
erDiagram
    users {
        uuid id PK
        text line_user_id UK
        text line_display_name
        text line_picture_url
        text email
        text stripe_customer_id
        text stripe_subscription_id
        text role
        integer google_search_count
        timestamp google_search_reset_at
        bigint created_at
        bigint updated_at
    }
    
    chat_sessions {
        text id PK
        uuid user_id FK
        text title
        text system_prompt
        bigint last_message_at
        bigint created_at
    }
    
    chat_messages {
        text id PK
        uuid user_id FK
        text session_id FK
        text role
        text content
        text model
        bigint created_at
    }
    
    wordpress_settings {
        uuid id PK
        uuid user_id FK
        text wp_type
        text wp_client_id
        text wp_client_secret
        text wp_site_id
        text wp_site_url
        text wp_username
        text wp_application_password
        timestamp created_at
        timestamp updated_at
    }
    
    sanity_projects {
        uuid id PK
        uuid user_id FK
        text project_id
        text dataset
        timestamp created_at
    }
    
    prompt_templates {
        uuid id PK
        text name UK
        text description
        text content
        boolean is_active
        timestamp created_at
        timestamp updated_at
    }
    
    prompt_versions {
        uuid id PK
        uuid template_id FK
        text content
        text change_description
        timestamp created_at
    }
    
    briefs {
        uuid id PK
        uuid user_id FK
        text name
        jsonb content
        timestamp created_at
        timestamp updated_at
    }
    
    prompt_chunks {
        uuid id PK
        uuid template_id FK
        text content
        vector embedding
        text metadata
        timestamp created_at
    }
    
    rag_queries {
        uuid id PK
        text query
        text expanded_query
        jsonb results
        timestamp created_at
    }
    
    users ||--o{ chat_sessions : has
    users ||--o{ chat_messages : owns
    users ||--o{ briefs : creates
    users ||--o| wordpress_settings : configures
    users ||--o| sanity_projects : manages
    chat_sessions ||--o{ chat_messages : contains
    prompt_templates ||--o{ prompt_versions : has
    prompt_templates ||--o{ prompt_chunks : contains
```

## ğŸš€ ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

### 1. å‰ææ¡ä»¶
- Node.js 18.x ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Supabase ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- LINE Developers ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Stripe ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæ±ºæ¸ˆæ©Ÿèƒ½ä½¿ç”¨æ™‚ï¼‰

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd industry-specific-mc-training

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env.local
```

### 3. ç’°å¢ƒå¤‰æ•°è¨­å®š

`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨­å®šï¼š

```bash
# LINE LIFFè¨­å®š
NEXT_PUBLIC_LIFF_ID=your_liff_id
NEXT_PUBLIC_LIFF_CHANNEL_ID=your_channel_id
LINE_CHANNEL_ID=your_channel_id
LINE_CHANNEL_SECRET=your_channel_secret

# Supabaseè¨­å®š
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE=your_service_role_key

# Stripeè¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
STRIPE_PRODUCT_ID=your_product_id
STRIPE_PRICE_ID=your_price_id

# OpenAI API
OPENAI_API_KEY=your_openai_api_key

# Googleæ¤œç´¢API
GOOGLE_CUSTOM_SEARCH_KEY=your_google_search_key
GOOGLE_CSE_ID=your_custom_search_engine_id

# SEMrush APIï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
SEMRUSH_API_KEY=your_semrush_api_key

# ã‚µã‚¤ãƒˆURL
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
npx supabase db push
```

### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
npm run dev
```

### 6. ngrokè¨­å®šï¼ˆé–‹ç™ºæ™‚ï¼‰

LINE LIFFã®é–‹ç™ºã«ã¯ HTTPS ãŒå¿…è¦ã§ã™ï¼š

```bash
# ãƒˆãƒ³ãƒãƒ«ä½œæˆï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å«ã¾ã‚Œã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰ï¼‰
npm run ngrok
```

## ğŸ“ WordPressé€£æºè¨­å®š

### WordPress.comé€£æº
1. [WordPress.com Developer](https://developer.wordpress.com/apps/) ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
2. Client ID / Client Secret å–å¾—
3. ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURLè¨­å®š: `{your_domain}/api/wordpress/oauth/callback`

### ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆWordPressé€£æº
1. WordPressç®¡ç†ç”»é¢ â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
2. ã€Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ã§æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ
3. ã‚µã‚¤ãƒˆURLã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€Application Passwordã‚’è¨­å®š

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œãƒ»2025å¹´7æœˆï¼‰

```
â”œâ”€â”€ app/                       # Next.js App Routerï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ admin/                # ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆæ¨©é™åˆ¶å¾¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ prompts/         # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”‚   â””â”€â”€ layout.tsx       # ç®¡ç†è€…ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ api/                 # API Routes
â”‚   â”‚   â”œâ”€â”€ line/           # LINEèªè¨¼API
â”‚   â”‚   â”œâ”€â”€ wordpress/      # WordPressé€£æºAPI  
â”‚   â”‚   â”œâ”€â”€ user/           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
â”‚   â”‚   â””â”€â”€ ad-form/        # LPä½œæˆAPI
â”‚   â”œâ”€â”€ chat/               # ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ components/     # ãƒãƒ£ãƒƒãƒˆå°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ CanvasPanel.tsx    # Canvasæç”»ãƒ‘ãƒãƒ«
â”‚   â”‚   â”‚   â”œâ”€â”€ InputArea.tsx      # AIãƒ¢ãƒ‡ãƒ«é¸æŠãƒ»å…¥åŠ›
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageArea.tsx    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
â”‚   â”‚   â”‚   â””â”€â”€ SessionSidebar.tsx # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â””â”€â”€ page.tsx        # ãƒãƒ£ãƒƒãƒˆãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ business-info/      # äº‹æ¥­æƒ…å ±å…¥åŠ›
â”‚   â”œâ”€â”€ setup/              # åˆæœŸè¨­å®šã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
â”‚   â””â”€â”€ subscription/       # ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†
â””â”€â”€ src/                    # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆçµ±åˆæ¸ˆã¿ï¼‰
    â”œâ”€â”€ components/         # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â””â”€â”€ ui/            # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”œâ”€â”€ domain/            # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‰ãƒªãƒ–ãƒ³è¨­è¨ˆ
    â”‚   â”œâ”€â”€ errors/        # ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
    â”‚   â”œâ”€â”€ interfaces/    # ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
    â”‚   â”œâ”€â”€ models/        # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
    â”‚   â””â”€â”€ services/      # ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
    â”œâ”€â”€ hooks/             # React ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
    â”œâ”€â”€ lib/               # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»å®šæ•°
    â”œâ”€â”€ server/            # ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯
    â”‚   â”œâ”€â”€ handler/actions/ # Server Actions
    â”‚   â”œâ”€â”€ middleware/      # èªè¨¼ãƒ»æ¨©é™ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
    â”‚   â””â”€â”€ services/        # å¤–éƒ¨APIãƒ»ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
    â””â”€â”€ types/             # TypeScriptå‹å®šç¾©
```

## ğŸ”§ ä¸»è¦ãªAPIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | æ©Ÿèƒ½ | æ–°æ©Ÿèƒ½ |
|---|---|---|
| `/api/line/callback` | LINEèªè¨¼ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ | - |
| `/api/refresh` | ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ | - |
| `/api/user/current` | ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãƒ»æ¨©é™ | - |
| `/api/user/search-count` | Googleæ¤œç´¢ä½¿ç”¨é‡ç¢ºèª | - |
| `/api/wordpress/test-connection` | WordPressæ¥ç¶šãƒ†ã‚¹ãƒˆ | - |
| `/api/wordpress/oauth/start` | WordPress.com OAuthé–‹å§‹ | - |
| `/api/wordpress/oauth/callback` | WordPress.com OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ | - |
| `/api/ad-form/create-landing-page` | ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ä½œæˆ | - |
| `/api/admin/rebuild-chunks` | RAGãƒãƒ£ãƒ³ã‚¯å†æ§‹ç¯‰ | âœ¨ æ–°æ©Ÿèƒ½ |
| `/api/rag/*` | RAGæ¤œç´¢ãƒ»æ‹¡å¼µç”Ÿæˆ | âœ¨ æ–°æ©Ÿèƒ½ |

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

- **Row Level Security (RLS)** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§ã®ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢
- **ç®¡ç†è€…æ¨©é™åˆ¶å¾¡** - `/admin`, `/setup`, `/debug`, `/studio` ã¸ã®éšå±¤åŒ–ã‚¢ã‚¯ã‚»ã‚¹
- **JWT Tokenç®¡ç†** - è‡ªå‹•ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ + 5åˆ†TTLãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **CSRFä¿è­·** - çŠ¶æ…‹ãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹ä¿è­·
- **ç’°å¢ƒå¤‰æ•°ç®¡ç†** - @t3-oss/env-nextjs ã«ã‚ˆã‚‹å‹å®‰å…¨ãªæ©Ÿå¯†æƒ…å ±ç®¡ç†
- **ä½¿ç”¨é‡åˆ¶é™** - Googleæ¤œç´¢APIåˆ¶é™ãƒ»ãƒ—ãƒ©ãƒ³åˆ¥æ©Ÿèƒ½ã‚²ãƒ¼ãƒˆ

## ğŸ“± ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Vercel ãƒ‡ãƒ—ãƒ­ã‚¤
1. Vercel ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¥ç¶š
3. ç’°å¢ƒå¤‰æ•°è¨­å®š
4. è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

### ç’°å¢ƒå›ºæœ‰è¨­å®š
- **é–‹ç™ºç’°å¢ƒ**: ngrok + ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
- **ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°**: Vercel ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒ
- **æœ¬ç•ªç’°å¢ƒ**: Vercel æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

## ğŸ—ï¸ é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ãƒ»ç®¡ç†æ©Ÿèƒ½ï¼ˆ2025å¹´7æœˆæœ€æ–°ç‰ˆï¼‰

### ğŸ”§ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆTypeScriptç›£è¦– + Turbopackï¼‰
npm run dev

# RAGã‚·ã‚¹ãƒ†ãƒ ç®¡ç†
npm run rag:sample    # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ–
npm run rag:convert   # CSVãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»ãƒãƒ£ãƒ³ã‚¯åŒ–
npm run rag:stats     # RAGãƒ‡ãƒ¼ã‚¿çµ±è¨ˆè¡¨ç¤º
npm run rag:reset     # RAGãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ
npm run rag:test      # CSVè§£æãƒ†ã‚¹ãƒˆ

# ngrokï¼ˆLINE LIFFé–‹ç™ºç”¨ï¼‰
npm run ngrok
```

### ğŸ› ï¸ ç®¡ç†è€…æ©Ÿèƒ½
- `/admin` - ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/admin/prompts` - AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†ï¼‰
- `/admin/prompts/[id]` - å€‹åˆ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†

### âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ©Ÿèƒ½
- `/setup` - åˆæœŸè¨­å®šã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
- `/setup/wordpress` - WordPressé€£æºè¨­å®š
- `/business-info` - äº‹æ¥­æƒ…å ±å…¥åŠ›ï¼ˆ17é …ç›®ãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ•°ç”¨ï¼‰

### ğŸ¨ ãƒãƒ£ãƒƒãƒˆãƒ»Canvasæ©Ÿèƒ½
- `/chat` - AIãƒãƒ£ãƒƒãƒˆï¼ˆ4ãƒ¢ãƒ‡ãƒ«é¸æŠãƒ»RAGæ¤œç´¢ï¼‰
- Canvasæç”»ãƒ‘ãƒãƒ« - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»ãƒ»å›³å½¢ãƒ»ãƒãƒ£ãƒƒãƒˆçµ±åˆ

### ğŸ“Š ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
- `/subscription` - Stripeæ±ºæ¸ˆãƒ»ãƒ—ãƒ©ãƒ³ç®¡ç†
- `/subscription/success` - æ±ºæ¸ˆå®Œäº†
- `/subscription/cancel` - æ±ºæ¸ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«

## ğŸ“ˆ æœ€æ–°ã®æ”¹å–„ãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆ2025å¹´7æœˆï¼‰

### âœ¨ æ–°æ©Ÿèƒ½è¿½åŠ 
- **Canvasæç”»æ©Ÿèƒ½** - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»ãƒ»å›³å½¢ä½œæˆãƒ»ãƒãƒ£ãƒƒãƒˆçµ±åˆ
- **RAGã‚·ã‚¹ãƒ†ãƒ ** - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ¤œç´¢æ‹¡å¼µç”Ÿæˆ
- **4ã¤ã®AIãƒ¢ãƒ‡ãƒ«çµ±åˆ** - å°‚é–€åŒ–ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ç¾¤ã«ã‚ˆã‚‹é«˜ç²¾åº¦å‡¦ç†
- **ç®¡ç†è€…ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†** - ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ãƒ»React Cacheãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†

### ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„
- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ çµ±åˆ** - `app/`ã¨`src/`ã®é©åˆ‡ãªåˆ†é›¢ãƒ»é‡è¤‡è§£æ¶ˆ
- **ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ‰ãƒªãƒ–ãƒ³è¨­è¨ˆ** - Clean Architectureæº–æ‹ 
- **å‹å®‰å…¨æ€§å‘ä¸Š** - strict TypeScriptãƒ»Zod validation
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–** - React 19ãƒ»Server Componentsãƒ»Turbopack

### ğŸ”§ é–‹ç™ºåŠ¹ç‡æ”¹å–„
- **ãƒ¢ãƒ‡ãƒ«åæ•´åˆæ€§** - `gpt-4.1-nano` â†’ `ad_copy_finishing` çµ±ä¸€
- **ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š** - ESLint 9ãƒ»Prettier 3.5.3ãƒ»Huskyçµ±åˆ
- **ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½å¼·åŒ–** - é–‹ç™ºç’°å¢ƒé™å®šãƒ­ã‚°ãƒ»TODOã‚³ãƒ¡ãƒ³ãƒˆè§£æ¶ˆ

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
2. å¤‰æ›´å®Ÿè£…ãƒ»TypeScriptå‹ãƒã‚§ãƒƒã‚¯ãƒ»ESLint
3. Husky pre-commit hooks ã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
4. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç§çš„åˆ©ç”¨ç›®çš„ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚