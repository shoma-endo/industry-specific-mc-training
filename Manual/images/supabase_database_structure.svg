<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <style>
    .title { font: bold 24px sans-serif; fill: #333; }
    .table-title { font: bold 16px sans-serif; fill: #333; }
    .table-desc { font: 14px sans-serif; fill: #333; }
    .table-box { fill: #F8FAFC; stroke: #94A3B8; stroke-width: 2; }
    .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    .users-box { fill: #EFF6FF; stroke: #3B82F6; stroke-width: 2; }
    .sessions-box { fill: #E0F2FE; stroke: #0EA5E9; stroke-width: 2; }
    .messages-box { fill: #DCFCE7; stroke: #10B981; stroke-width: 2; }
    .field-name { font: bold 14px sans-serif; fill: #333; }
    .field-type { font: italic 14px sans-serif; fill: #666; }
    .pk { font: bold 14px sans-serif; fill: #3B82F6; }
    .fk { font: bold 14px sans-serif; fill: #10B981; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" class="title">Supabaseデータベース構造</text>
  
  <!-- Users Table -->
  <rect x="50" y="80" width="220" height="300" rx="8" class="users-box" />
  <text x="160" y="110" text-anchor="middle" class="table-title">users</text>
  
  <text x="70" y="140" class="field-name">id</text>
  <text x="250" y="140" text-anchor="end" class="field-type">uuid</text>
  <text x="70" y="160" class="pk">PRIMARY KEY</text>
  
  <text x="70" y="190" class="field-name">line_user_id</text>
  <text x="250" y="190" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="220" class="field-name">line_display_name</text>
  <text x="250" y="220" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="250" class="field-name">line_picture_url</text>
  <text x="250" y="250" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="280" class="field-name">line_status_message</text>
  <text x="250" y="280" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="310" class="field-name">stripe_customer_id</text>
  <text x="250" y="310" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="340" class="field-name">stripe_subscription_id</text>
  <text x="250" y="340" text-anchor="end" class="field-type">text</text>
  
  <text x="70" y="370" class="field-name">created_at</text>
  <text x="250" y="370" text-anchor="end" class="field-type">timestamp</text>
  
  <!-- Chat Sessions Table -->
  <rect x="320" y="80" width="220" height="200" rx="8" class="sessions-box" />
  <text x="430" y="110" text-anchor="middle" class="table-title">chat_sessions</text>
  
  <text x="340" y="140" class="field-name">id</text>
  <text x="520" y="140" text-anchor="end" class="field-type">uuid</text>
  <text x="340" y="160" class="pk">PRIMARY KEY</text>
  
  <text x="340" y="190" class="field-name">user_id</text>
  <text x="520" y="190" text-anchor="end" class="field-type">uuid</text>
  <text x="340" y="210" class="fk">FOREIGN KEY</text>
  
  <text x="340" y="240" class="field-name">title</text>
  <text x="520" y="240" text-anchor="end" class="field-type">text</text>
  
  <text x="340" y="270" class="field-name">created_at</text>
  <text x="520" y="270" text-anchor="end" class="field-type">timestamp</text>
  
  <!-- Chat Messages Table -->
  <rect x="590" y="80" width="220" height="250" rx="8" class="messages-box" />
  <text x="700" y="110" text-anchor="middle" class="table-title">chat_messages</text>
  
  <text x="610" y="140" class="field-name">id</text>
  <text x="790" y="140" text-anchor="end" class="field-type">uuid</text>
  <text x="610" y="160" class="pk">PRIMARY KEY</text>
  
  <text x="610" y="190" class="field-name">session_id</text>
  <text x="790" y="190" text-anchor="end" class="field-type">uuid</text>
  <text x="610" y="210" class="fk">FOREIGN KEY</text>
  
  <text x="610" y="240" class="field-name">role</text>
  <text x="790" y="240" text-anchor="end" class="field-type">text</text>
  
  <text x="610" y="270" class="field-name">content</text>
  <text x="790" y="270" text-anchor="end" class="field-type">text</text>
  
  <text x="610" y="300" class="field-name">created_at</text>
  <text x="790" y="300" text-anchor="end" class="field-type">timestamp</text>
  
  <!-- SQL Migration Info -->
  <rect x="50" y="400" width="760" height="180" rx="8" class="table-box" />
  <text x="430" y="430" text-anchor="middle" class="table-title">マイグレーションファイル</text>
  
  <text x="70" y="460" class="table-desc">- 20250327000000_create_users_table.sql</text>
  <text x="70" y="490" class="table-desc">- 20240327000001_create_chat_tables.sql</text>
  
  <text x="70" y="530" class="table-desc">各テーブルにはRow Level Security (RLS)ポリシーが設定されており、</text>
  <text x="70" y="560" class="table-desc">ユーザーは自分のデータのみにアクセスできます。</text>
  
  <!-- Relationship Arrows -->
  <path d="M270,190 L320,190" class="arrow" />
  <path d="M540,190 L590,190" class="arrow" />
</svg>
