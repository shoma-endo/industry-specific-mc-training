<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <style>
    .title { font: bold 24px sans-serif; fill: #333; }
    .step-title { font: bold 16px sans-serif; fill: #333; }
    .step-desc { font: 14px sans-serif; fill: #333; }
    .step-box { fill: #F8FAFC; stroke: #94A3B8; stroke-width: 2; }
    .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    .step-number { font: bold 20px sans-serif; fill: #fff; }
    .step-circle { stroke: #333; stroke-width: 1; }
    .component-label { font: italic 12px sans-serif; fill: #666; }
    .user-box { fill: #FEF3C7; stroke: #94A3B8; stroke-width: 2; }
    .line-box { fill: #DCFCE7; stroke: #94A3B8; stroke-width: 2; }
    .app-box { fill: #E0F2FE; stroke: #94A3B8; stroke-width: 2; }
    .supabase-box { fill: #F1F5F9; stroke: #94A3B8; stroke-width: 2; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" class="title">LINEèªè¨¼ãƒ•ãƒ­ãƒ¼</text>
  
  <!-- User -->
  <rect x="50" y="80" width="150" height="450" rx="8" class="user-box" />
  <text x="125" y="110" text-anchor="middle" class="step-title">ãƒ¦ãƒ¼ã‚¶ãƒ¼</text>
  <circle cx="125" cy="160" r="30" fill="#FEF3C7" stroke="#94A3B8" stroke-width="2" />
  <text x="125" y="165" text-anchor="middle" class="step-desc">ğŸ‘¤</text>
  
  <!-- LINE Platform -->
  <rect x="250" y="80" width="150" height="450" rx="8" class="line-box" />
  <text x="325" y="110" text-anchor="middle" class="step-title">LINE Platform</text>
  <text x="325" y="130" text-anchor="middle" class="component-label">LIFF SDK</text>
  
  <!-- LIFF App -->
  <rect x="450" y="80" width="150" height="450" rx="8" class="app-box" />
  <text x="525" y="110" text-anchor="middle" class="step-title">LIFFã‚¢ãƒ—ãƒª</text>
  <text x="525" y="130" text-anchor="middle" class="component-label">Next.js</text>
  
  <!-- Supabase -->
  <rect x="650" y="80" width="150" height="450" rx="8" class="supabase-box" />
  <text x="725" y="110" text-anchor="middle" class="step-title">Supabase</text>
  <text x="725" y="130" text-anchor="middle" class="component-label">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</text>
  
  <!-- Step 1: User Login -->
  <circle cx="125" cy="200" r="20" class="step-circle" fill="#F59E0B" />
  <text x="125" y="205" text-anchor="middle" class="step-number">1</text>
  <text x="125" y="235" text-anchor="middle" class="step-desc">LIFFã‚¢ãƒ—ãƒªã‚’é–‹ã</text>
  
  <!-- Step 2: LIFF Init -->
  <circle cx="525" cy="200" r="20" class="step-circle" fill="#0EA5E9" />
  <text x="525" y="205" text-anchor="middle" class="step-number">2</text>
  <text x="525" y="235" text-anchor="middle" class="step-desc">LIFF SDKåˆæœŸåŒ–</text>
  
  <!-- Step 3: LINE Login -->
  <circle cx="325" cy="280" r="20" class="step-circle" fill="#10B981" />
  <text x="325" y="285" text-anchor="middle" class="step-number">3</text>
  <text x="325" y="315" text-anchor="middle" class="step-desc">LINEãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†</text>
  <text x="325" y="335" text-anchor="middle" class="step-desc">ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ</text>
  
  <!-- Step 4: Token Verification -->
  <circle cx="525" cy="280" r="20" class="step-circle" fill="#0EA5E9" />
  <text x="525" y="285" text-anchor="middle" class="step-number">4</text>
  <text x="525" y="315" text-anchor="middle" class="step-desc">ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼</text>
  <text x="525" y="335" text-anchor="middle" class="step-desc">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—</text>
  
  <!-- Step 5: User Creation/Update -->
  <circle cx="725" cy="360" r="20" class="step-circle" fill="#94A3B8" />
  <text x="725" y="365" text-anchor="middle" class="step-number">5</text>
  <text x="725" y="395" text-anchor="middle" class="step-desc">ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ/æ›´æ–°</text>
  <text x="725" y="415" text-anchor="middle" class="step-desc">ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç¢ºèª</text>
  
  <!-- Step 6: Session Establishment -->
  <circle cx="525" cy="440" r="20" class="step-circle" fill="#0EA5E9" />
  <text x="525" y="445" text-anchor="middle" class="step-number">6</text>
  <text x="525" y="475" text-anchor="middle" class="step-desc">ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºç«‹</text>
  <text x="525" y="495" text-anchor="middle" class="step-desc">ã‚¢ã‚¯ã‚»ã‚¹æ¨©ä»˜ä¸</text>
  
  <!-- Step 7: User Access -->
  <circle cx="125" cy="440" r="20" class="step-circle" fill="#F59E0B" />
  <text x="125" y="445" text-anchor="middle" class="step-number">7</text>
  <text x="125" y="475" text-anchor="middle" class="step-desc">ã‚¢ãƒ—ãƒªæ©Ÿèƒ½ã¸</text>
  <text x="125" y="495" text-anchor="middle" class="step-desc">ã‚¢ã‚¯ã‚»ã‚¹</text>
  
  <!-- Arrows -->
  <path d="M150,200 L500,200" class="arrow" />
  <path d="M525,220 L525,260" class="arrow" />
  <path d="M505,280 L345,280" class="arrow" />
  <path d="M345,300 L505,300" class="arrow" />
  <path d="M545,280 L705,360" class="arrow" />
  <path d="M725,380 L545,440" class="arrow" />
  <path d="M505,440 L145,440" class="arrow" />
</svg>
