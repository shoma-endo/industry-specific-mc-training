<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <style>
    .title { font: bold 24px sans-serif; fill: #333; }
    .step-title { font: bold 16px sans-serif; fill: #333; }
    .step-desc { font: 14px sans-serif; fill: #333; }
    .step-box { fill: #F8FAFC; stroke: #94A3B8; stroke-width: 2; }
    .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    .step-number { font: bold 20px sans-serif; fill: #fff; }
    .step-circle { stroke: #333; stroke-width: 1; }
    .free-box { fill: #EFF6FF; stroke: #3B82F6; stroke-width: 2; }
    .premium-box { fill: #F0FDF4; stroke: #10B981; stroke-width: 2; }
    .code-box { font: 12px monospace; fill: #333; background: #F1F5F9; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" class="title">サブスクリプションフロー</text>
  
  <!-- Free Plan -->
  <rect x="50" y="80" width="300" height="200" rx="8" class="free-box" />
  <text x="200" y="110" text-anchor="middle" class="step-title">無料プラン</text>
  
  <text x="70" y="140" class="step-desc">• 基本的なチャット機能</text>
  <text x="70" y="170" class="step-desc">• 1日あたりのメッセージ数制限</text>
  <text x="70" y="200" class="step-desc">• 基本モデル（GPT-3.5）のみ</text>
  <text x="70" y="230" class="step-desc">• 履歴保存期間制限</text>
  <text x="70" y="260" class="step-desc">• 広告表示あり</text>
  
  <!-- Premium Plan -->
  <rect x="450" y="80" width="300" height="200" rx="8" class="premium-box" />
  <text x="600" y="110" text-anchor="middle" class="step-title">プレミアムプラン</text>
  
  <text x="470" y="140" class="step-desc">• 無制限のチャット</text>
  <text x="470" y="170" class="step-desc">• 高度なモデル（GPT-4o）へのアクセス</text>
  <text x="470" y="200" class="step-desc">• カスタムプロンプト保存</text>
  <text x="470" y="230" class="step-desc">• 無制限の履歴保存</text>
  <text x="470" y="260" class="step-desc">• 広告表示なし</text>
  
  <!-- Subscription Flow -->
  <path d="M350,180 L450,180" class="arrow" />
  <text x="400" y="160" text-anchor="middle" class="step-desc">サブスクリプション</text>
  <text x="400" y="180" text-anchor="middle" class="step-desc">購入</text>
  
  <!-- Subscription Process -->
  <rect x="50" y="320" width="700" height="260" rx="8" class="step-box" />
  <text x="400" y="350" text-anchor="middle" class="step-title">サブスクリプション処理フロー</text>
  
  <!-- Step 1 -->
  <circle cx="100" cy="400" r="25" class="step-circle" fill="#3B82F6" />
  <text x="100" y="405" text-anchor="middle" class="step-number">1</text>
  <text x="250" y="405" text-anchor="middle" class="step-desc">ユーザーがプレミアムプランを選択</text>
  
  <!-- Step 2 -->
  <circle cx="100" cy="460" r="25" class="step-circle" fill="#3B82F6" />
  <text x="100" y="465" text-anchor="middle" class="step-number">2</text>
  <text x="250" y="465" text-anchor="middle" class="step-desc">Stripe Checkoutセッション作成</text>
  
  <!-- Step 3 -->
  <circle cx="100" cy="520" r="25" class="step-circle" fill="#3B82F6" />
  <text x="100" y="525" text-anchor="middle" class="step-number">3</text>
  <text x="250" y="525" text-anchor="middle" class="step-desc">支払い処理と確認</text>
  
  <!-- Step 4 -->
  <circle cx="400" cy="400" r="25" class="step-circle" fill="#10B981" />
  <text x="400" y="405" text-anchor="middle" class="step-number">4</text>
  <text x="550" y="405" text-anchor="middle" class="step-desc">Stripeから成功Webhook受信</text>
  
  <!-- Step 5 -->
  <circle cx="400" cy="460" r="25" class="step-circle" fill="#10B981" />
  <text x="400" y="465" text-anchor="middle" class="step-number">5</text>
  <text x="550" y="465" text-anchor="middle" class="step-desc">ユーザーのサブスクリプション情報更新</text>
  
  <!-- Step 6 -->
  <circle cx="400" cy="520" r="25" class="step-circle" fill="#10B981" />
  <text x="400" y="525" text-anchor="middle" class="step-number">6</text>
  <text x="550" y="525" text-anchor="middle" class="step-desc">プレミアム機能のアクセス権付与</text>
  
  <!-- Arrows -->
  <path d="M125,400 L175,400" class="arrow" />
  <path d="M125,460 L175,460" class="arrow" />
  <path d="M125,520 L175,520" class="arrow" />
  <path d="M325,400 L375,400" class="arrow" />
  <path d="M325,460 L375,460" class="arrow" />
  <path d="M325,520 L375,520" class="arrow" />
  
  <path d="M100,425 L100,435" class="arrow" />
  <path d="M100,485 L100,495" class="arrow" />
  <path d="M400,425 L400,435" class="arrow" />
  <path d="M400,485 L400,495" class="arrow" />
</svg>
